<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papelaria DELA</title>
    <link rel="stylesheet" type="text/css" href="../static/css/style2.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Bem-Vindo</h1>
        </header>
        <center><img src="/static/images/papelariaDELA.png"></center> <br><br>

        <div id="menu">
            <button onclick="mostrarFormulario('formVenderProduto')">Vender Produto</button>
            <button onclick="mostrarFormulario('formAdicionarProduto')">Adicionar Produto</button>
            <button onclick="mostrarFormulario('formRemoverProduto')">Remover Produto</button>
            <button onclick="mostrarEstoqueGeral()">Visualizar Estoque Geral</button>
            <!-- Outros botões de menu aqui -->
        </div>

        <!-- Formulário para vender produto -->
        <form id="formVenderProduto" class="formulario" style="display:none">
            <!-- Seus campos de formulário para vender produto aqui -->
        </form>

        <!-- Formulário para adicionar produto -->
        <form id="formAdicionarProduto" class="formulario" style="display:none">
            <input type="text" id="novoProduto" placeholder="Nome do produto">
            <input type="number" id="estoqueProduto" placeholder="Estoque inicial">
            <input type="number" id="precoProduto" placeholder="Preço">
            <button type="button" onclick="adicionarProduto()">Adicionar Produto</button>
        </form>

        <!-- Formulário para remover produto -->
        <form id="formRemoverProduto" class="formulario" style="display:none">
            <input type="text" id="produtoRemover" placeholder="Nome do produto">
            <button type="button" onclick="removerProduto()">Remover Produto</button>
        </form>

        <div id="estoqueGeral" style="display:none">
            <h2>Estoque Geral</h2>
            <ul id="listaProdutos">
                <!-- Os produtos em estoque serão exibidos aqui -->
            </ul>
        </div>

    </div>
    <footer>
        <p>&copy; Papelaria DELA</p>
    </footer>

    <script>
        function mostrarFormulario(formId) {
            var forms = document.getElementsByClassName('formulario');
            for (var i = 0; i < forms.length; i++) {
                forms[i].style.display = 'none';
            }
            document.getElementById(formId).style.display = 'block';
        }

        function adicionarProduto() {
            var produto = document.getElementById('novoProduto').value;
            var estoque = document.getElementById('estoqueProduto').value;
            var preco = document.getElementById('precoProduto').value;

            fetch('http://127.0.0.1:5000/adicionar_produto', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    produto: produto,
                    estoque: estoque,
                    preco: preco
                })
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Erro ao adicionar produto.');
                }
            })
            .then(data => {
                alert(data.message); // Mensagem de sucesso ou erro
            })
            .catch(error => {
                console.error('Erro:', error);
            });
        }

        function removerProduto() {
            var produto = document.getElementById('produtoRemover').value;

            fetch('http://127.0.0.1:5000/remover_produto', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    produto: produto
                })
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Erro ao remover produto.');
                }
            })
            .then(data => {
                alert(data.message); // Mensagem de sucesso ou erro
            })
            .catch(error => {
                console.error('Erro:', error);
            });
        }

        function mostrarEstoqueGeral() {
            fetch('http://127.0.0.1:5000/visualizar_estoque_geral')
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Erro ao obter estoque geral.');
                }
            })
            .then(data => {
                exibirEstoqueGeral(data.estoque_geral);
            })
            .catch(error => {
                console.error('Erro:', error);
            });
        }

        function exibirEstoqueGeral(estoque) {
            var listaProdutos = document.getElementById('listaProdutos');
            listaProdutos.innerHTML = '';

            for (var produto in estoque) {
                var quantidade = estoque[produto];
                var listItem = document.createElement('li');
                listItem.textContent = produto + ': ' + quantidade;
                listaProdutos.appendChild(listItem);
            }

            document.getElementById('estoqueGeral').style.display = 'block';
        }
    </script>
</body>
</html>
